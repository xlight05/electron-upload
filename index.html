<!DOCTYPE html>
<html>

<head>
  <title>Our Code World</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <div>
    <div style="text-align:center;">
      <input type="text" placeholder="Please select a file" id="actual-file" disabled="disabled" />
      <input type="button" value="Choose a file" id="select-file" />
    </div>
  </div>
  <hr>
  <script>
    const { dialog } = require('electron').remote;
    var fs = require('fs');


    // document.getElementById('select-file').addEventListener('click', function (event) {
    //     dialog.showOpenDialog({
    //         properties: ['openFile']
    //     }, function (files) {
    //         if (files !== undefined) {
    //           alert(files);
    //             // handle files
    //         } else {
    //           alert("No files selected");
    //         }
    //     });
    // });

    document.getElementById('select-file').addEventListener('click', function () {
      let dialogOptions = {
       properties: ['openFile'],
     };
     let isDelete = true;
      dialog.showOpenDialog(
        dialogOptions
      ).then((fileNames) => {
        if (fileNames === undefined) {
          console.log("No file selected");
        } else {
          console.log('file:', fileNames.filePaths[0]);
          var filepath = fileNames.filePaths[0];
          if (isDelete) {
            deleteFile(filepath)
          }
        }
      }).catch(err => console.log('Handle Error', err))
    }, false);


    function readFile(filepath) {
      fs.readFile(filepath, 'utf-8', function (err, data) {
        if (err) {
          alert("An error ocurred reading the file :" + err.message);
          return;
        }

        document.getElementById("content-editor").value = data;
      });
    }

    function deleteFile(filepath) {
      fs.exists(filepath, function (exists) {
        if (exists) {
          // File exists deletings
          fs.unlink(filepath, function (err) {
            if (err) {
              alert("An error ocurred updating the file" + err.message);
              console.log(err);
              return;
            }
          });
        } else {
          alert("This file doesn't exist, cannot delete");
        }
      });
    }
  </script>
</body>

</html>